## 系统内置地址以及交易格式
> 目前系统用到的内置合约地址定义如下：

*  储备池账户地址 `0x100000000000000000000000000000000000000` 
*  候选池合约地址 `0x100000000000000000000000000000000000001` 
*  票池合约地址   `0x100000000000000000000000000000000000002` 

前端调用内置合约接口，发送交易。需要将请求的参数进行rlp编码组成交易的data字段。格式如下：
`data = rlp(txType [8]byte, funcName []byte, param1 []byte, param2 []byte...)`

| 字段       | 类型             | 说明     |
| -------- | -------------- | ------ |
| txType   | [8]byte        | 交易的类型  |
| funcName | string=>[]byte | 调用的方法名 |
| param1   | 不定=>[]byte     | 参数1    |
| ...      | ...            | ...    |


## 接口定义
> 注：所有返回值均为json格式

```
// 票结构
type Ticket struct {
    TicketId [32]byte // 票Id
    Owner [20]byte  // 票的所属者
    Deposit *big.Int // 购票时的票价
    CandidateId [64]byte // 候选人Id（节点Id）
    BlockNumber *big.Int // 购票时的块高
    State // 选票状态（1->正常，2->被选中，3->过期，4->掉榜）
	RBlockNumber *big.Int // 票被释放时的块高
}
```

### 1.VoteTicket
购买选票，投票给候选人
发送交易的value为  `购票数量 * 选票单价` 

入参：

| 字段     | 类型       | 说明      |
| ------ | -------- | ------- |
| count  | uint64   | 购票数量    |
| price  | *big.Int | 选票单价    |
| nodeId | [64]byte | 候选人节点Id |

出参（事件：VoteTicketEvent）：

| 字段    | 类型          | 说明            |
| ----- | ----------- | ------------- |
| ret   | []ticketId | (购票成功)选票的Id列表 |
| error | string      | 错误信息          |

### 2.GetTicketDetail
获取票详情

入参：

| 字段       | 类型       | 说明   |
| -------- | -------- | ---- |
| ticketId | [32]byte | 票Id  |

出参：

| 字段    | 类型     | 说明   |
| ----- | ------ | ---- |
| ret   | Ticket | 选票信息 |
| error | string | 错误信息 |

### 3.GetBatchTicketDetail

批量获取票详情

入参：

| 字段       | 类型       | 说明   |
| -------- | -------- | ---- |
| ticketIds | []ticketId | 票Id列表  |

出参：

| 字段    | 类型     | 说明   |
| ----- | ------ | ---- |
| ret   | []Ticket | 选票信息列表 |
| error | string | 错误信息 |

### 4.GetCandidateTicketIds

获取指定候选人的选票Id的列表

入参：

| 字段     | 类型       | 说明   |
| ------ | -------- | ---- |
| nodeId | [64]byte | 节点Id |

出参：

| 字段    | 类型          | 说明      |
| ----- | ----------- | ------- |
| ret   | []ticketId | 选票的Id列表 |
| error | string      | 错误信息    |

### 5.GetBatchCandidateTicketIds

批量获取指定候选人的选票Id的列表

入参：

| 字段     | 类型       | 说明   |
| ------ | -------- | ---- |
| nodeIds | []nodeId | 节点Id列表 |

出参：

| 字段    | 类型          | 说明      |
| ----- | ----------- | ------- |
| ret   | []ticketIds | 多个节点的选票的Id列表 |
| error | string      | 错误信息    |

### 6.GetCandidateEpoch

获取指定候选人的票龄

入参：

| 字段     | 类型       | 说明   |
| ------ | -------- | ---- |
| nodeId | [64]byte | 节点Id |

出参：

| 字段    | 类型     | 说明   |
| ----- | ------ | ---- |
| ret   | uint64 | 票龄   |
| error | string | 错误信息 |

### 7.GetPoolRemainder
获取票池剩余票数量

入参： 无

出参：

| 字段    | 类型     | 说明    |
| ----- | ------ | ----- |
| ret   | uint64 | 剩余票数量 |
| error | string | 错误信息  |

### 8.GetTicketPrice
获取当前的票价

入参： 无

出参：

| 字段    | 类型       | 说明   |
| ----- | -------- | ---- |
| ret   | *big.Int | 当前票价 |
| error | string   | 错误信息 |

### 接口请求示例
> 用户投票 VoteTicket

参数：

* count：`1000`
* price：`100`
* nodeId： `a363d1243646b6eabf1d4851f646b523f5707d053caab95022f1682605aca0537ee0c5c14b4dfa76dcbce264b7e68d59de79a42b7cda059e9d358336a9ab8d80`

rlp编码：
`source [][]byte = txType.ToBytes + VoteTicket.ToBytes + count.ToBytes + price.ToBytes + nodeId.ToBytes`
`rlp(source) => 0xf8a28800000000000000f18a566f74655469636b65748800000000000003e864b88230786133363364313234333634366236656162663164343835316636343662353233663537303764303533636161623935303232663136383236303561636130353337656530633563313462346466613736646362636532363462376536386435396465373961343262376364613035396539643335383333366139616238643830`

组成data字段发送交易：
`{ from:eth.accounts[0], to:"0x1000000000000000000000000000000000000002", value:web3.toWei(100000, "ether"), data:"0xf8a28800000000000000f18a566f74655469636b65748800000000000003e864b88230786133363364313234333634366236656162663164343835316636343662353233663537303764303533636161623935303232663136383236303561636130353337656530633563313462346466613736646362636532363462376536386435396465373961343262376364613035396539643335383333366139616238643830" }`
